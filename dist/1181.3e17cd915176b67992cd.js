"use strict";(self.webpackChunkweb_rcc_app=self.webpackChunkweb_rcc_app||[]).push([[1181],{81181:(Q,p,i)=>{i.r(p),i.d(p,{RoleListingModule:()=>N});var c=i(38583),u=i(15844),f=i(80466),l=i(32401),v=i(4863),L=i(63563),A=i(11863),t=i(37716),b=i(27632),m=i(3679),Z=i(78703),y=i(8008),C=i(51080),R=i(54655),T=i(69763),g=i(98295),D=i(49983),h=i(43220),F=i(67441),_=i(72458);function S(n,d){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){const e=d.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}let J=(()=>{class n extends L.t{constructor(e,a,r,o,s,$,k){super(),this._bc=e,this._fb=a,this._table=r,this._toast=o,this._roles=s,this._router=$,this._common=k,this.heading=[{heading:"Role",key:"role",sort:!0,type:"link",link:`/${l.b6}/${l.K$}`},{heading:"Created Date",key:"createdAt",align:"center",type:"date",sort:!0},{heading:"Modified Date",key:"updatedAt",align:"center",type:"date",sort:!0},{heading:"Status",key:"status",align:"center",type:"formatStatus"},{heading:"Action",key:"status",type:"action",action:[1,2,3]}],this.tempList=[],this.status=v.Q_,this.subscriptions=[]}ngOnInit(){this._bc.setBreadcrumb(A.Z_),this.createForm(),this.getRolesListing()}createForm(){this.filterForm=this._fb.group({fromDate:[""],toDate:[""],status:[""]})}get f(){return this.filterForm.controls}selectFromDate(e){this.f.toDate.setValue(null)}getRolesListing(){this._table.tableRender({data:[]})}addRoles(e){this._router.navigate(0==e.id?[`${l.b6}/${l.K$}/${l.D7}`]:[`${l.b6}/${l.K$}/${l.dm}`,e.data._id])}paginationWithSearch(e,a){switch(a){case 0:this.resetPages(),this.search=e,this.tableRef.paginator&&this.tableRef.paginator.firstPage();break;default:this.pageOptionsOnChange=e}this.getRolesListing()}sortByListing(e){this.sortOptions=e,this.getRolesListing()}changeStatus(e){switch(e.id){case 1:this.addRoles(e);break;default:this.changeBannerStatus(e)}}changeBannerStatus(e){e.action==this.API_EVENT.delete?this.deleteRoleFromList(e):this.activateInactivateBanners(e)}activateInactivateBanners(e){this._roles.activateInactivateRole({roleId:e.data._id,status:e.action}).subscribe(r=>{this.showListAfterAction(r)})}deleteRoleFromList(e){this._roles.deleteRole(e.data._id).subscribe(a=>{e.data.s_no>1&&e.data.s_no%this.limit==1&&1==this.tempList.length&&(this.pageNo=this.pageNo-1,this.tableRef.paginator.pageIndex=this.pageNo-1),this.showListAfterAction(a)})}showListAfterAction(e){this._toast.success(e.message),this.getRolesListing()}filterApply(e){!this.filterForm.dirty||(e.apply?this.filterOptions=this.changeDateFormat(this.filterForm.value):(this.filterOptions=null,this.filterForm.reset()),this.resetPages(),this.tableRef.paginator&&this.tableRef.paginator.firstPage(),this.getRolesListing())}changeDateFormat(e){return e.fromDate&&(e.fromDate=(0,u.Xp)(e.fromDate)),e.toDate&&(e.toDate=(0,u.Xp)(e.toDate,!0)),e}ngOnDestroy(){this.subscriptions.length>0&&this._common.unsubscribe(this.subscriptions)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.p),t.Y36(m.qu),t.Y36(Z.w),t.Y36(y.k),t.Y36(C.s),t.Y36(R.F0),t.Y36(T.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-role-listing"]],viewQuery:function(e,a){if(1&e&&t.Gf(f.S,5),2&e){let r;t.iGM(r=t.CRH())&&(a.tableRef=r.first)}},features:[t.qOj],decls:22,vars:10,consts:[["placeholder","Search by Role",3,"heading","add","find","page","status","sort","filter"],["role","filter"],[1,"filterForm",3,"formGroup"],["appearance","outline"],["matInput","","placeholder","Added From","formControlName","fromDate","readonly","",3,"matDatepicker","max","click","dateChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","placeholder","Added To","formControlName","toDate","readonly","",3,"matDatepicker","max","min","click"],["picker2",""],["appearance","outline",1,"search_filter"],["placeholder","Select Status","formControlName","status"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"mat-table-renderer",0),t.NdJ("add",function(s){return a.addRoles(s)})("find",function(s){return a.paginationWithSearch(s,0)})("page",function(s){return a.paginationWithSearch(s,1)})("status",function(s){return a.changeStatus(s)})("sort",function(s){return a.sortByListing(s)})("filter",function(s){return a.filterApply(s)}),t.TgZ(1,"div",1),t.TgZ(2,"form",2),t.TgZ(3,"mat-label"),t._uU(4,"Added From"),t.qZA(),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"input",4),t.NdJ("click",function(){return t.CHM(r),t.MAs(9).open()})("dateChange",function(s){return a.selectFromDate(s)}),t.qZA(),t._UZ(7,"mat-datepicker-toggle",5),t._UZ(8,"mat-datepicker",null,6),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Added To"),t.qZA(),t.TgZ(12,"mat-form-field",3),t.TgZ(13,"input",7),t.NdJ("click",function(){return t.CHM(r),t.MAs(16).open()}),t.qZA(),t._UZ(14,"mat-datepicker-toggle",5),t._UZ(15,"mat-datepicker",null,8),t.qZA(),t.TgZ(17,"mat-label"),t._uU(18,"Status"),t.qZA(),t.TgZ(19,"mat-form-field",9),t.TgZ(20,"mat-select",10),t.YNc(21,S,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const r=t.MAs(9),o=t.MAs(16);t.Q6J("heading",a.heading),t.xp6(2),t.Q6J("formGroup",a.filterForm),t.xp6(4),t.Q6J("matDatepicker",r)("max",a.today),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Q6J("matDatepicker",o)("max",a.today)("min",a.f.fromDate.value),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngForOf",a.status)}},directives:[f.S,m._Y,m.JL,m.sg,g.hX,g.KE,D.Nt,m.Fj,h.hl,m.JJ,m.u,h.nW,g.R9,h.Mq,F.gD,c.sg,_.ey],styles:[""]}),n})();var M=i(73478);const O=[{path:"",component:J}];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,R.Bz.forChild(O),m.UX,M.g]]}),n})()}}]);