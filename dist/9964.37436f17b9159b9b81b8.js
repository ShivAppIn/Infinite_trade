"use strict";(self.webpackChunkweb_rcc_app=self.webpackChunkweb_rcc_app||[]).push([[9964],{49964:(Y,c,n)=>{n.r(c),n.d(c,{SubAdminsListingModule:()=>M});var u=n(38583),h=n(15844),f=n(80466),A=n(63563),m=n(32401),S=n(4863),v=n(11863),t=n(37716),Z=n(27632),d=n(3679),L=n(78703),_=n(8008),C=n(51080),b=n(54655),T=n(69763),p=n(98295),y=n(49983),g=n(43220),F=n(67441),D=n(72458);function R(s,l){if(1&s&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&s){const e=l.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function J(s,l){if(1&s&&(t.TgZ(0,"mat-option",15),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&s){const e=t.oxw();t.xp6(2),t.hij(" ",e.isRoleApiCallInProgress?"Loading...":"Please add role first"," ")}}function N(s,l){if(1&s&&(t.TgZ(0,"mat-option",14),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&s){const e=l.$implicit;t.Q6J("value",null==e?null:e._id),t.xp6(1),t.hij("",t.lcZ(2,2,null==e?null:e.role)," ")}}let O=(()=>{class s extends A.t{constructor(e,i,o,r,a,U,B){super(),this._bc=e,this._fb=i,this._table=o,this._toast=r,this._roles=a,this._router=U,this._common=B,this.heading=[{heading:"Name",key:"name",sort:!0,type:"link",link:`/${m.b6}/${m.Wl}`},{heading:"Email",key:"email",align:"center"},{heading:"Role",key:"role",align:"center",sort:!0},{heading:"Created Date",key:"createdAt",align:"center",type:"date",sort:!0},{heading:"Status",key:"status",align:"center",type:"formatStatus"},{heading:"Action",key:"status",type:"action",action:[1,2,3]}],this.tempList=[],this.status=S.Q_,this.roles=[],this.subscriptions=[]}ngOnInit(){this._bc.setBreadcrumb(v.Me),this.createForm(),this.fetchCreatedRoles(),this.getSubAdminListing()}createForm(){this.filterForm=this._fb.group({fromDate:[""],toDate:[""],status:[""],roleId:[""]})}get f(){return this.filterForm.controls}selectFromDate(e){this.f.toDate.setValue(null)}fetchCreatedRoles(){}getSubAdminListing(){this._table.tableRender({data:[]})}addSubAdmins(e){this._router.navigate(0==e.id?[`${m.b6}/${m.Wl}/${m.D7}`]:[`${m.b6}/${m.Wl}/${m.dm}`,e.data._id])}paginationWithSearch(e,i){switch(i){case 0:this.resetPages(),this.search=e,this.tableRef.paginator&&this.tableRef.paginator.firstPage();break;default:this.pageOptionsOnChange=e}this.getSubAdminListing()}sortByListing(e){this.sortOptions=e,this.getSubAdminListing()}changeStatus(e){switch(e.id){case 1:this.addSubAdmins(e);break;default:this.changeBannerStatus(e)}}changeBannerStatus(e){e.action==this.API_EVENT.delete?this.deleteSubAdminFromList(e):this.activateInactivateBanners(e)}activateInactivateBanners(e){this._roles.activateInactivateSubAdmin({adminId:e.data._id,status:e.action}).subscribe(o=>{this.showListAfterAction(o)})}deleteSubAdminFromList(e){this._roles.deleteSubAdmin(e.data._id).subscribe(i=>{e.data.s_no>1&&e.data.s_no%this.limit==1&&1==this.tempList.length&&(this.pageNo=this.pageNo-1,this.tableRef.paginator.pageIndex=this.pageNo-1),this.showListAfterAction(i)})}showListAfterAction(e){this._toast.success(e.message),this.getSubAdminListing()}filterApply(e){!this.filterForm.dirty||(e.apply?this.filterOptions=this.changeDateFormat(this.filterForm.value):(this.filterOptions=null,this.filterForm.reset()),this.resetPages(),this.tableRef.paginator&&this.tableRef.paginator.firstPage(),this.getSubAdminListing())}changeDateFormat(e){return e.fromDate&&(e.fromDate=(0,h.Xp)(e.fromDate)),e.toDate&&(e.toDate=(0,h.Xp)(e.toDate,!0)),e}ngOnDestroy(){this.subscriptions.length>0&&this._common.unsubscribe(this.subscriptions)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(Z.p),t.Y36(d.qu),t.Y36(L.w),t.Y36(_.k),t.Y36(C.s),t.Y36(b.F0),t.Y36(T.v))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-sub-admins-listing"]],viewQuery:function(e,i){if(1&e&&t.Gf(f.S,5),2&e){let o;t.iGM(o=t.CRH())&&(i.tableRef=o.first)}},features:[t.qOj],decls:30,vars:12,consts:[["placeholder","Search by Name or Email",3,"heading","add","find","page","status","sort","filter"],["role","filter"],[1,"filterForm",3,"formGroup"],["appearance","outline"],["matInput","","placeholder","Added From","formControlName","fromDate","readonly","",3,"matDatepicker","max","click","dateChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","placeholder","Added To","formControlName","toDate","readonly","",3,"matDatepicker","max","min","click"],["picker2",""],["appearance","outline",1,"search_filter"],["placeholder","Select Status","formControlName","status"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Role","formControlName","roleId"],["disabled","",4,"ngIf"],[3,"value"],["disabled",""]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"mat-table-renderer",0),t.NdJ("add",function(a){return i.addSubAdmins(a)})("find",function(a){return i.paginationWithSearch(a,0)})("page",function(a){return i.paginationWithSearch(a,1)})("status",function(a){return i.changeStatus(a)})("sort",function(a){return i.sortByListing(a)})("filter",function(a){return i.filterApply(a)}),t.TgZ(1,"div",1),t.TgZ(2,"form",2),t.TgZ(3,"mat-label"),t._uU(4,"Added From"),t.qZA(),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"input",4),t.NdJ("click",function(){return t.CHM(o),t.MAs(9).open()})("dateChange",function(a){return i.selectFromDate(a)}),t.qZA(),t._UZ(7,"mat-datepicker-toggle",5),t._UZ(8,"mat-datepicker",null,6),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Added To"),t.qZA(),t.TgZ(12,"mat-form-field",3),t.TgZ(13,"input",7),t.NdJ("click",function(){return t.CHM(o),t.MAs(16).open()}),t.qZA(),t._UZ(14,"mat-datepicker-toggle",5),t._UZ(15,"mat-datepicker",null,8),t.qZA(),t.TgZ(17,"mat-label"),t._uU(18,"Status"),t.qZA(),t.TgZ(19,"mat-form-field",9),t.TgZ(20,"mat-select",10),t.YNc(21,R,2,2,"mat-option",11),t.qZA(),t.qZA(),t.TgZ(22,"mat-label"),t._uU(23,"Role"),t.qZA(),t.TgZ(24,"mat-form-field",3),t.TgZ(25,"mat-label"),t._uU(26,"Select Role"),t.qZA(),t.TgZ(27,"mat-select",12),t.YNc(28,J,3,1,"mat-option",13),t.YNc(29,N,3,4,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.MAs(9),r=t.MAs(16);t.Q6J("heading",i.heading),t.xp6(2),t.Q6J("formGroup",i.filterForm),t.xp6(4),t.Q6J("matDatepicker",o)("max",i.today),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Q6J("matDatepicker",r)("max",i.today)("min",i.f.fromDate.value),t.xp6(1),t.Q6J("for",r),t.xp6(7),t.Q6J("ngForOf",i.status),t.xp6(7),t.Q6J("ngIf",!i.roles||(null==i.roles?null:i.roles.length)<=0),t.xp6(1),t.Q6J("ngForOf",i.roles)}},directives:[f.S,d._Y,d.JL,d.sg,p.hX,p.KE,y.Nt,d.Fj,g.hl,d.JJ,d.u,g.nW,p.R9,g.Mq,F.gD,u.sg,u.O5,D.ey],pipes:[u.rS],styles:[""]}),s})();var Q=n(73478);const k=[{path:"",component:O}];let M=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[u.ez,b.Bz.forChild(k),d.UX,Q.g]]}),s})()}}]);